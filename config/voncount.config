{
  "view-visit": {


    "stats:iguide:{igid}:hourly": [
      {
        "id": "all:{year}-{month}-{day}-{hour}",
        "count": "visits",
        "custom_functions": [
          { "name": "loopMean", "args": ["{epoch}", "{day_sec}", "7", "!all:last7:%Y-%m-%d-%H"] },
          { "name": "loopMean", "args": ["{epoch}", "{day_sec}", "30", "!all:last30:%Y-%m-%d-%H"] },
          { "name": "mean", "args": ["all:ever:{hour}"] }
        ]
      },
      {
        "id": "unique:{year}-{month}-{day}-{hour}",
        "count": "{unique}",
        "custom_functions": [
          { "name": "loopMean", "args": ["{epoch}", "{day_sec}", "7", "!unique:last7:%Y-%m-%d-%H"] },
          { "name": "loopMean", "args": ["{epoch}", "{day_sec}", "30", "!unique:last30:%Y-%m-%d-%H"] },
          { "name": "mean", "args": ["unique:ever:{hour}"] }
        ]
      },
      {
        "id": "referer:{year}-{month}-{day}-{hour}",
        "count": "{referer}",
        "type": "set",
        "custom_functions": [
          { "name": "loopMean", "args": ["{epoch}", "{day_sec}", "7", "!referer:last7:%Y-%m-%d-%H"] },
          { "name": "loopMean", "args": ["{epoch}", "{day_sec}", "30", "!referer:last30:%Y-%m-%d-%H"] },
          { "name": "mean", "args": ["referer:ever:{hour}"] }
        ]
      }
    ]

  }
}
